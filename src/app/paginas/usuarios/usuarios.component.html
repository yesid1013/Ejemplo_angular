<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SB Admin 2 - Blank</title>

    <!-- Custom fonts for this template-->

    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

</head>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        <!-- Componente menu lateral -->
        <app-menu></app-menu>

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!--    Componente Topbar -->
                <app-topbar></app-topbar>
                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <!-- Contenido de la pagina -->
                    <h1 class="h3 mb-4 text-gray-800">Usuarios</h1>
                    <form class="row p-1" [formGroup]="formUsers">


                        <div class="col-md-2 pe-0">
                            <a class="btn btn-success" (click)="openModal(template)"><i class="bi bi-person-add"
                                    style="font-size: 1.2em;"></i> Añadir nuevo usuario</a>

                            <ng-template #template>
                                <div class="modal-header">
                                    <h4 class="modal-title pull-left">Crear nuevo usuario</h4>
                                    <button type="button" class="close btn-close pull-right" aria-label="Close"
                                        (click)="modalRef?.hide()">
                                        <span aria-hidden="true" class="visually-hidden">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="row p-1">
                                        <div class="col-md-6">
                                            <div class="form-outline">
                                                <i class="fas fa-dollar-sign trailing"></i>
                                                <input formControlName="num_documento" type="text" id=""
                                                    class="form-control form-icon-trailing"
                                                    placeholder="Ingrese el numero de documento" />

                                                <div *ngIf="formUsers.get('num_documento')?.hasError('required') && formUsers.touched"
                                                    class="alert alert-primary" role="alert">
                                                    <i class="bi bi-exclamation-triangle"></i>
                                                    El numero de documento es requerido.
                                                </div>
                                                <div *ngIf="formUsers.get('num_documento')?.hasError('min') && formUsers.touched"
                                                    class="alert alert-primary" role="alert">
                                                    <i class="bi bi-exclamation-triangle"></i>
                                                    Ingrese un valor valido.
                                                </div>
                                            </div>
                                        </div>


                                        <div class="col-md-6">
                                            <div class="form-outline">
                                                <i class="fas fa-dollar-sign trailing"></i>
                                                <input formControlName="nombre" type="text" id="form1"
                                                    class="form-control form-icon-trailing"
                                                    placeholder="Ingrese el nombre" />
                                                <div *ngIf="formUsers.get('nombre')?.hasError('required') && formUsers.touched"
                                                    class="alert alert-primary" role="alert">
                                                    <i class="bi bi-exclamation-triangle"></i>
                                                    El nombre es requerido.
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="row p-1">
                                        <div class="col-md-6">
                                            <div class="form-outline">
                                                <i class="fas fa-dollar-sign trailing"></i>
                                                <input formControlName="apellido" type="text" id="form1"
                                                    class="form-control form-icon-trailing"
                                                    placeholder="Ingrese el apellido" />
                                                <div *ngIf="formUsers.get('apellido')?.hasError('required') && formUsers.touched"
                                                    class="alert alert-primary" role="alert">
                                                    <i class="bi bi-exclamation-triangle"></i>
                                                    El apellido es requerido.
                                                </div>
                                            </div>
                                        </div>
    
                                        <div class="col-md-6">
                                            <div class="form-outline">
                                                <i class="fas fa-dollar-sign trailing"></i>
                                                <input formControlName="email" type="text" id="form1"
                                                    class="form-control form-icon-trailing"
                                                    placeholder="Ingrese el email" />
                                                <div *ngIf="formUsers.get('email')?.hasError('required') && formUsers.touched"
                                                    class="alert alert-primary" role="alert">
                                                    <i class="bi bi-exclamation-triangle"></i>
                                                    El email es requerido.
                                                </div>
                                                <div *ngIf="formUsers.get('email')?.hasError('email') && formUsers.touched"
                                                    class="alert alert-primary" role="alert">
                                                    <i class="bi bi-exclamation-triangle"></i>
                                                    El email es invalido.
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="row p-1">
                                        <div class="col-md-6">
                                            <div class="form-outline">
                                                <i class="fas fa-dollar-sign trailing"></i>
                                                <input formControlName="password" type="text" id="form1"
                                                    class="form-control form-icon-trailing"
                                                    placeholder="Ingrese la contraseña" />
                                                <div *ngIf="formUsers.get('password')?.hasError('required') && formUsers.touched"
                                                    class="alert alert-primary" role="alert">
                                                    <i class="bi bi-exclamation-triangle"></i>
                                                    La contraseña es requerida.
                                                </div>
                                            </div>
                                        </div>
    
                                        <div class="col-md-6">
                                            <div class="form-outline">
                                                <i class="fas fa-dollar-sign trailing"></i>
                                                <select formControlName="cargo" name="cargo" id="cargo"
                                                    class="form-select  form-icon-trailing">
                                                    <option value="" disabled selected>--Selecciona un cargo--</option>
                                                    <option value=1>Administrador local</option>
                                                    <option value=2>Administrador departamental</option>
                                                    <option value=3>Administrador nacional</option>
    
    
    
                                                </select>
                                                <div *ngIf="formUsers.get('cargo')?.hasError('required') && formUsers.touched"
                                                    class="alert alert-primary" role="alert">
                                                    <i class="bi bi-exclamation-triangle"></i>
                                                    Por favor seleccione una opcion.
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>

                                
                                    <div class="row pt-4">
                                        <div class="col text-center">
                                            <div class="form-outline">
                                                <!-- <a class="btn btn-primary" (click)="modalRef?.hide()" >Añadir producto</a> -->
                                                <button [disabled]="formUsers.invalid" type="button"
                                                    (click)="insertar_usuario(formUsers.value)"
                                                    class="btn btn-primary">Añadir
                                                    usuario
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </ng-template>
                        </div>

                        <div class="col-md-2 pe-0">
                            <a class="btn btn-success" (click)="openModal(template1)"><i class="bi bi-person-fill-up"
                                    style="font-size: 1.2em;"></i> Ver usuarios borrados</a>

                            <ng-template #template1>
                                <div class="modal-header">
                                    <h4 class="modal-title pull-left">Usuarios borrados</h4>
                                    <button type="button" class="close btn-close pull-right" aria-label="Close"
                                        (click)="modalRef?.hide()">
                                        <span aria-hidden="true" class="visually-hidden">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">

                                    <div class="col-12 pt-4 text-center">
                                        <table class="row-border hover table">
                                            <thead>
                                                <tr>

                                                <tr>
                                                    <th>Numero documento</th>
                                                    <th>Nombre</th>
                                                    <th>Apellido</th>
                                                    <th>Email</th>
                                                    <th>Cargo</th>
                                                    <th>Restaurar</th>
                                                </tr>
                                            </thead>
                                            <tbody *ngFor="let usuario of lista_usuarios_borrados">
                                                <tr>
                                                    <td>{{usuario.documento}}</td>
                                                    <td>{{usuario.nombre}}</td>
                                                    <td>{{usuario.apellido}}</td>
                                                    <td>{{usuario.email}}</td>
                                                    <td>{{usuario.cargo}}</td>
                                                    <td><a class="btn btn-success"
                                                            (click)="restaurar_usuario(usuario.id_user)"><i
                                                                class="bi bi-person-check"
                                                                style="font-size: 1.2em;"></i> Restaurar</a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </ng-template>
                        </div>


                        <div class="col-12 pt-4">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Numero documento</th>
                                        <th>Nombre</th>
                                        <th>Apellido</th>
                                        <th>Email</th>
                                        <th>Contraseña</th>
                                        <th>Cargo</th>
                                        <th>Editar</th>
                                        <th>Eliminar</th>
                                    </tr>
                                </thead>
                                <tbody *ngFor="let usuario of lista_usuarios">
                                    <tr>
                                        <td>{{usuario.documento}}</td>
                                        <td>{{usuario.nombre}}</td>
                                        <td>{{usuario.apellido}}</td>
                                        <td>{{usuario.email}}</td>
                                        <td>{{usuario.password}}</td>
                                        <td>{{usuario.cargo}}</td>
                                        <td><a class="btn btn-success" (click)="openModal2(template2,usuario)"><i
                                                    class="bi bi-person-gear" style="font-size: 1.2em;"></i> Editar</a>
                                        </td>
                                        <td><a class="btn btn-danger" (click)="eliminar_usuario(usuario.id_user)"><i
                                                    class="bi bi-person-x" style="font-size: 1.2em;"></i> Eliminar</a>
                                        </td>


                                        <!--Modal editar-->
                                        <ng-template #template2>
                                            <div class="modal-header">
                                                <h4 class="modal-title pull-left">Editar Usuario</h4>
                                                <button type="button" class="close btn-close pull-right"
                                                    aria-label="Close" (click)="cerrarModal()">
                                                    <span aria-hidden="true" class="visually-hidden">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="row p-1">
                                                    <div class="col-md-6">
                                                        <div class="form-outline">
                                                            <i class="fas fa-dollar-sign trailing"></i>
                                                            <input formControlName="num_documento" type="text"
                                                                id="documento" class="form-control form-icon-trailing"
                                                                placeholder="Ingrese el numero de documento" />

                                                            <div *ngIf="formUsers.get('num_documento')?.hasError('required') && formUsers.touched"
                                                                class="alert alert-primary" role="alert">
                                                                <i class="bi bi-exclamation-triangle"></i>
                                                                El numero de documento es requerido.
                                                            </div>
                                                            <div *ngIf="formUsers.get('num_documento')?.hasError('min') && formUsers.touched"
                                                                class="alert alert-primary" role="alert">
                                                                <i class="bi bi-exclamation-triangle"></i>
                                                                Ingrese un valor valido.
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="col-md-6">
                                                        <div class="form-outline">
                                                            <i class="fas fa-dollar-sign trailing"></i>
                                                            <input formControlName="nombre" type="text" id="form1"
                                                                class="form-control form-icon-trailing"
                                                                placeholder="Ingrese el nombre" />
                                                            <div *ngIf="formUsers.get('nombre')?.hasError('required') && formUsers.touched"
                                                                class="alert alert-primary" role="alert">
                                                                <i class="bi bi-exclamation-triangle"></i>
                                                                El nombre es requerido.
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                                <div class="row p-1">
                                                    <div class="col-md-6">
                                                        <div class="form-outline">
                                                            <i class="fas fa-dollar-sign trailing"></i>
                                                            <input formControlName="apellido" type="text" id="form1"
                                                                class="form-control form-icon-trailing"
                                                                placeholder="Ingrese el apellido" />
                                                            <div *ngIf="formUsers.get('apellido')?.hasError('required') && formUsers.touched"
                                                                class="alert alert-primary" role="alert">
                                                                <i class="bi bi-exclamation-triangle"></i>
                                                                El apellido es requerido.
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <div class="form-outline">
                                                            <i class="fas fa-dollar-sign trailing"></i>
                                                            <input formControlName="email" type="text" id="form1"
                                                                class="form-control form-icon-trailing"
                                                                placeholder="Ingrese el email" />
                                                            <div *ngIf="formUsers.get('email')?.hasError('required') && formUsers.touched"
                                                                class="alert alert-primary" role="alert">
                                                                <i class="bi bi-exclamation-triangle"></i>
                                                                El email es requerido.
                                                            </div>
                                                            <div *ngIf="formUsers.get('email')?.hasError('email') && formUsers.touched"
                                                                class="alert alert-primary" role="alert">
                                                                <i class="bi bi-exclamation-triangle"></i>
                                                                El email es invalido.
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                                <div class="row p-1">
                                                    <div class="col-md-6">
                                                        <div class="form-outline">
                                                            <i class="fas fa-dollar-sign trailing"></i>
                                                            <input formControlName="password" type="text" id="form1"
                                                                class="form-control form-icon-trailing"
                                                                placeholder="Ingrese la contraseña" />
                                                            <div *ngIf="formUsers.get('password')?.hasError('required') && formUsers.touched"
                                                                class="alert alert-primary" role="alert">
                                                                <i class="bi bi-exclamation-triangle"></i>
                                                                La contraseña es requerida.
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <div class="form-outline">
                                                            <i class="fas fa-dollar-sign trailing"></i>
                                                            <select formControlName="cargo" name="cargo" id="cargo"
                                                                class="form-select  form-icon-trailing">
                                                                <option value="" disabled selected>--Selecciona un
                                                                    cargo--</option>
                                                                <option value=3>Administrador nacional</option>
                                                                <option value=2>Administrador departamental</option>
                                                                <option value=1>Administrador local</option>

                                                            </select>
                                                            <div *ngIf="formUsers.get('cargo')?.hasError('required') && formUsers.touched"
                                                                class="alert alert-primary" role="alert">
                                                                <i class="bi bi-exclamation-triangle"></i>
                                                                Por favor seleccione una opcion.
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                                    <div class="row pt-4">
                                                        <div class="col text-center">
                                                            <div class="form-outline">
                                                                <!-- <a class="btn btn-primary" (click)="modalRef?.hide()" >Añadir producto</a> -->
                                                                <button [disabled]="formUsers.invalid"
                                                                    (click)="editar_usuario(formUsers.value,usuario.id_user)"
                                                                    type="button" class="btn btn-primary">Editar
                                                                    usuario
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>


                                                
                                            </div>
                                        </ng-template>
                                        <!--####### FIN Modal editar#############-->
                                    </tr>
                                </tbody>



                            </table>
                        </div>

                    </form>



                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <app-footer></app-footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>





</body>

</html>